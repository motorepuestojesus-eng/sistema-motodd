<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SISTEMA POS - MOTO JESÚS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg: #0f172a; --card: #1e293b; --accent: #38bdf8; 
            --success: #10b981; --text: #f1f5f9;
        }
        body { background: var(--bg); color: var(--text); font-family: 'Poppins', sans-serif; display: flex; height: 100vh; overflow: hidden; }
        
        /* Sidebar Estilo Imagen 2 */
        .sidebar { width: 260px; background: var(--card); border-right: 1px solid #334155; display: flex; flex-direction: column; }
        .nav-btn { padding: 16px 25px; color: #94a3b8; cursor: pointer; border: none; background: none; width: 100%; text-align: left; display: flex; align-items: center; gap: 15px; transition: 0.3s; }
        .nav-btn.active { background: #334155; color: white; border-left: 4px solid var(--accent); }

        .main { flex: 1; padding: 25px; overflow-y: auto; background: #f3f4f6; } /* Fondo gris claro para que resalte tu cuadro blanco */

        /* TU CÓDIGO ORIGINAL (ESTILO IMAGEN 3) */
        .glass-jesus { background: rgba(255, 255, 255, 0.95); border-radius: 2rem; padding: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); }
        .table-rainbow th { background: linear-gradient(90deg, #4f46e5, #ec4899); color: white; padding: 10px; font-size: 10px; text-transform: uppercase; }
        .input-glow:focus { outline: none; background: rgba(79, 70, 229, 0.05); }
        .card-red { background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%); color: #991b1b; }
        .card-blue { background: linear-gradient(135deg, #bae6fd 0%, #7dd3fc 100%); color: #075985; }
        input { background: transparent; text-align: center; width: 100%; font-weight: 600; font-size: 13px; }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="p-8 text-xl font-black text-sky-400 italic">MOTO JESÚS POS</div>
        <button class="nav-btn" onclick="tab('pos')"><i class="fas fa-shopping-cart"></i> Ventas</button>
        <button class="nav-btn" onclick="tab('inv')"><i class="fas fa-boxes"></i> Inventario</button>
        <button class="nav-btn active" onclick="tab('cuadre')"><i class="fas fa-cash-register"></i> Cuadre de Caja</button>
    </nav>

    <main class="main">
        
        <div id="tab-cuadre" class="page block">
            <div class="glass-jesus">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-3xl font-black text-indigo-900 italic uppercase">Moto Repuestos Jesús</h1>
                    <div class="flex gap-4">
                        <div class="bg-indigo-600 p-2 rounded-xl text-white text-center shadow-lg">
                            <span class="text-[9px] font-bold opacity-80 uppercase">Tasa BCV</span>
                            <input type="number" id="tasa" step="0.01" value="54.20" class="text-xl font-black w-20 text-white outline-none" onchange="calcular()">
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 mb-6">
                    <table class="table-rainbow w-full">
                        <thead>
                            <tr>
                                <th>Factura</th><th>Cliente</th><th>$ Efectivo</th><th>Bs Efectivo</th><th>Débito</th><th>Pago Móvil</th><th class="bg-pink-500">Sub-Total Bs</th><th class="bg-indigo-800">Total $</th>
                            </tr>
                        </thead>
                        <tbody id="cuerpoVentas"></tbody>
                    </table>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="card-blue p-5 rounded-3xl shadow-md">
                        <h3 class="font-black uppercase text-[10px] mb-3 italic">Cuentas por Cobrar</h3>
                        <div id="seccionCuentas" class="space-y-2"></div>
                    </div>

                    <div class="card-red p-5 rounded-3xl shadow-md">
                        <h3 class="font-black uppercase text-[10px] mb-3 italic">Gastos / Egresos (Bs)</h3>
                        <div id="seccionGastos" class="space-y-2"></div>
                    </div>

                    <div class="bg-slate-900 p-6 rounded-3xl shadow-2xl flex flex-col items-center text-white">
                        <span class="text-[9px] font-black uppercase tracking-widest text-indigo-400 mb-2 italic">Diferencia $ (Sistema vs Físico)</span>
                        <div id="statusNum" class="text-6xl font-black mb-1">0.00</div>
                        <div id="statusTxt" class="text-[10px] font-bold uppercase italic text-gray-400">Cuadrando...</div>
                        
                        <div class="mt-4 w-full bg-indigo-950 p-3 rounded-2xl border border-indigo-800">
                            <h4 class="text-[9px] font-bold text-indigo-300 uppercase mb-2">Conteo Billetes Físico $</h4>
                            <div id="billetes" class="grid grid-cols-2 gap-x-4 gap-y-1 text-[10px]"></div>
                            <div class="mt-2 pt-2 border-t border-indigo-800 flex justify-between text-xs font-black">
                                <span>TOTAL FÍSICO:</span><span id="resFisico" class="text-indigo-300">0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // LÓGICA DE TU CÓDIGO ORIGINAL [cite: 2026-01-09]
        let app = JSON.parse(localStorage.getItem('moto_jesus_data')) || {
            filas: Array(10).fill().map(() => ({fact:'', cli:'', usd:0, bsE:0, deb:0, pm:0})),
            cuentas: Array(3).fill().map(() => ({desc:'', monto:0})),
            gastos: Array(3).fill().map(() => ({desc:'', monto:0})),
            billetes: {100:0, 50:0, 20:0, 10:0, 5:0, 2:0, 1:0}
        };

        function calcular() {
            const tasa = parseFloat(document.getElementById('tasa').value) || 1;
            let totalSistemaUsd = 0;
            const tb = document.getElementById('cuerpoVentas'); tb.innerHTML = "";

            app.filas.forEach((f, i) => {
                const subBs = (f.bsE||0) + (f.deb||0) + (f.pm||0);
                const totUsd = (f.usd||0) + (subBs / tasa);
                totalSistemaUsd += totUsd;
                tb.innerHTML += `<tr>
                    <td><input value="${f.fact}" onchange="upd(${i},'fact',this.value)"></td>
                    <td><input class="text-left px-2" value="${f.cli}" onchange="upd(${i},'cli',this.value)"></td>
                    <td><input class="text-blue-600 font-bold" type="number" value="${f.usd||''}" onchange="upd(${i},'usd',parseFloat(this.value))"></td>
                    <td><input type="number" value="${f.bsE||''}" onchange="upd(${i},'bsE',parseFloat(this.value))"></td>
                    <td><input type="number" value="${f.deb||''}" onchange="upd(${i},'deb',parseFloat(this.value))"></td>
                    <td><input type="number" value="${f.pm||''}" onchange="upd(${i},'pm',parseFloat(this.value))"></td>
                    <td class="font-bold text-pink-600 text-center">${subBs.toFixed(2)}</td>
                    <td class="font-black text-indigo-700 text-center">${totUsd.toFixed(2)}</td>
                </tr>`;
            });

            // Conteo Billetes
            let tMano = 0; const sb = document.getElementById('billetes'); sb.innerHTML = "";
            [100, 50, 20, 10, 5, 2, 1].forEach(d => {
                const c = app.billetes[d] || 0; tMano += (c * d);
                sb.innerHTML += `<div class="flex justify-between border-b border-indigo-900/30"><span>${d}$</span><input type="number" class="w-8 text-white font-black" value="${c||''}" onchange="updB(${d},parseInt(this.value))"></div>`;
            });

            document.getElementById('resFisico').innerText = tMano.toFixed(2);
            const diff = tMano - totalSistemaUsd;
            document.getElementById('statusNum').innerText = Math.abs(diff).toFixed(2);
            document.getElementById('statusNum').className = "text-6xl font-black mb-1 " + (Math.abs(diff) < 0.01 ? "text-green-400" : "text-red-400");
            
            localStorage.setItem('moto_jesus_data', JSON.stringify(app));
        }

        function upd(i,k,v) { app.filas[i][k] = v; calcular(); }
        function updB(d,v) { app.billetes[d] = v; calcular(); }
        function tab(id) { /* Lógica para cambiar de pestaña */ }
        
        calcular();
    </script>
</body>
</html>
